require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"LayerSVG":[function(require,module,exports){
var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

exports.LayerSVG = (function(superClass) {
  extend(LayerSVG, superClass);

  function LayerSVG(options) {
    if (options == null) {
      options = {};
    }
    LayerSVG.__super__.constructor.call(this, options);
    this.html = "<svg id='" + options.id + "' width='" + this.width + "' height='" + this.height + "'><defs></defs></svg>";
    this.svg = this.querySelector("#" + options.id);
    this.shapes = {};
    this.masks = {};
    this.clipPaths = {};
  }

  LayerSVG.prototype.addShape = function(options) {
    var option, shape, value;
    if (options == null) {
      options = {};
    }
    shape = document.createElementNS("http://www.w3.org/2000/svg", "" + options.shape);
    for (option in options) {
      if (!hasProp.call(options, option)) continue;
      value = options[option];
      if (option !== "shape") {
        shape.setAttributeNS(null, "" + option, "" + options[option]);
      }
    }
    this.svg.appendChild(shape);
    this.shapes["" + options.id] = shape;
    return shape;
  };

  LayerSVG.prototype.addDef = function(options) {
    var def, defs, i, len, ref, shape;
    if (options == null) {
      options = {};
    }
    def = document.createElementNS("http://www.w3.org/2000/svg", "" + options.type);
    def.setAttributeNS(null, "id", "" + options.id);
    if (def === "clipPath" || "mask") {
      ref = options.shapes;
      for (i = 0, len = ref.length; i < len; i++) {
        shape = ref[i];
        if (typeof shape === "string") {
          shape = this.svg.getElementById("" + shape);
        }
        def.appendChild(shape);
      }
    }
    defs = this.svg.getElementsByTagName("defs")[0];
    defs.appendChild(def);
    if (options.type === "clipPath") {
      return this.clipPaths["" + options.id] = def;
    } else {
      return this.masks["" + options.id] = def;
    }
  };

  LayerSVG.prototype.addToMask = function(shapes, mask, prevShape) {
    var i, len, results, shape;
    if (typeof mask === "string") {
      mask = this.svg.getElementById("" + mask);
    }
    if (!Array.isArray(shapes)) {
      shape = shapes;
      if (typeof shape === "string") {
        shape = this.svg.getElementById("" + shape);
      }
      if (!prevShape) {
        return mask.appendChild(shape);
      } else {
        return mask.insertBefore(shape, prevShape);
      }
    } else {
      results = [];
      for (i = 0, len = shapes.length; i < len; i++) {
        shape = shapes[i];
        if (typeof shape === "string") {
          shape = this.svg.getElementById("" + shape);
        }
        if (!prevShape) {
          results.push(mask.appendChild(shape));
        } else {
          results.push(mask.insertBefore(shape, prevShape));
        }
      }
      return results;
    }
  };

  LayerSVG.prototype.mask = function(shape, mask) {
    if (typeof shape === "string") {
      shape = this.svg.getElementById("" + shape);
    }
    if (typeof mask !== "string") {
      mask = mask.getAttributeNS(null, "id");
    }
    return shape.setAttributeNS(null, "mask", "url(#" + mask + ")");
  };

  return LayerSVG;

})(Layer);



},{}],"LayerSVG":[function(require,module,exports){
// Generated by CoffeeScript 1.9.1
var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

exports.LayerSVG = (function(superClass) {
  extend(LayerSVG, superClass);

  function LayerSVG(options) {
    if (options == null) {
      options = {};
    }
    LayerSVG.__super__.constructor.call(this, options);
    this.html = "<svg id='" + options.id + "' width='" + this.width + "' height='" + this.height + "'><defs></defs></svg>";
    this.svg = this.querySelector("#" + options.id);
    this.shapes = {};
    this.masks = {};
    this.clipPaths = {};
  }

  LayerSVG.prototype.addShape = function(options) {
    var option, shape, value;
    if (options == null) {
      options = {};
    }
    shape = document.createElementNS("http://www.w3.org/2000/svg", "" + options.shape);
    for (option in options) {
      if (!hasProp.call(options, option)) continue;
      value = options[option];
      if (option !== "shape") {
        shape.setAttributeNS(null, "" + option, "" + options[option]);
      }
    }
    this.svg.appendChild(shape);
    this.shapes["" + options.id] = shape;
    return shape;
  };

  LayerSVG.prototype.addDef = function(options) {
    var def, defs, i, len, ref, shape;
    if (options == null) {
      options = {};
    }
    def = document.createElementNS("http://www.w3.org/2000/svg", "" + options.type);
    def.setAttributeNS(null, "id", "" + options.id);
    if (def === "clipPath" || "mask") {
      ref = options.shapes;
      for (i = 0, len = ref.length; i < len; i++) {
        shape = ref[i];
        if (typeof shape === "string") {
          shape = this.svg.getElementById("" + shape);
        }
        def.appendChild(shape);
      }
    }
    defs = this.svg.getElementsByTagName("defs")[0];
    defs.appendChild(def);
    if (options.type === "clipPath") {
      return this.clipPaths["" + options.id] = def;
    } else {
      return this.masks["" + options.id] = def;
    }
  };

  LayerSVG.prototype.addToMask = function(shapes, mask, prevShape) {
    var i, len, results, shape;
    if (typeof mask === "string") {
      mask = this.svg.getElementById("" + mask);
    }
    if (!Array.isArray(shapes)) {
      shape = shapes;
      if (typeof shape === "string") {
        shape = this.svg.getElementById("" + shape);
      }
      if (!prevShape) {
        return mask.appendChild(shape);
      } else {
        return mask.insertBefore(shape, prevShape);
      }
    } else {
      results = [];
      for (i = 0, len = shapes.length; i < len; i++) {
        shape = shapes[i];
        if (typeof shape === "string") {
          shape = this.svg.getElementById("" + shape);
        }
        if (!prevShape) {
          results.push(mask.appendChild(shape));
        } else {
          results.push(mask.insertBefore(shape, prevShape));
        }
      }
      return results;
    }
  };

  LayerSVG.prototype.mask = function(shape, mask) {
    if (typeof shape === "string") {
      shape = this.svg.getElementById("" + shape);
    }
    if (typeof mask !== "string") {
      mask = mask.getAttributeNS(null, "id");
    }
    return shape.setAttributeNS(null, "mask", "url(#" + mask + ")");
  };

  return LayerSVG;

})(Layer);

},{}],"myModule":[function(require,module,exports){
exports.myVar = "myVariable";

exports.myFunction = function() {
  return print("myFunction is running");
};

exports.myArray = [1, 2, 3];



},{}]},{},[])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvam9zaG10dWNrZXIvR2l0SHViL0xheWVyU1ZHL0xheWVyU1ZHLmZyYW1lci9tb2R1bGVzL0xheWVyU1ZHLmNvZmZlZSIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL2pvc2htdHVja2VyL0dpdEh1Yi9MYXllclNWRy9MYXllclNWRy5mcmFtZXIvbW9kdWxlcy9MYXllclNWRy5qcyIsIi9Vc2Vycy9qb3NobXR1Y2tlci9HaXRIdWIvTGF5ZXJTVkcvTGF5ZXJTVkcuZnJhbWVyL21vZHVsZXMvbXlNb2R1bGUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsSUFBQTs2QkFBQTs7QUFBQSxPQUFhLENBQUM7QUFDYiw4QkFBQSxDQUFBOztBQUFhLEVBQUEsa0JBQUMsT0FBRCxHQUFBOztNQUFDLFVBQVE7S0FFckI7QUFBQSxJQUFBLDBDQUFNLE9BQU4sQ0FBQSxDQUFBO0FBQUEsSUFFQSxJQUFDLENBQUEsSUFBRCxHQUFRLFdBQUEsR0FBWSxPQUFPLENBQUMsRUFBcEIsR0FBdUIsV0FBdkIsR0FBa0MsSUFBQyxDQUFDLEtBQXBDLEdBQTBDLFlBQTFDLEdBQXNELElBQUMsQ0FBQyxNQUF4RCxHQUErRCx1QkFGdkUsQ0FBQTtBQUFBLElBR0EsSUFBQyxDQUFBLEdBQUQsR0FBTyxJQUFDLENBQUMsYUFBRixDQUFnQixHQUFBLEdBQUksT0FBTyxDQUFDLEVBQTVCLENBSFAsQ0FBQTtBQUFBLElBS0EsSUFBQyxDQUFBLE1BQUQsR0FBVSxFQUxWLENBQUE7QUFBQSxJQU1BLElBQUMsQ0FBQSxLQUFELEdBQVMsRUFOVCxDQUFBO0FBQUEsSUFPQSxJQUFDLENBQUEsU0FBRCxHQUFhLEVBUGIsQ0FGWTtFQUFBLENBQWI7O0FBQUEscUJBV0EsUUFBQSxHQUFVLFNBQUMsT0FBRCxHQUFBO0FBQ1QsUUFBQSxvQkFBQTs7TUFEVSxV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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hHQSxPQUFPLENBQUMsS0FBUixHQUFnQixZQUFoQixDQUFBOztBQUFBLE9BRU8sQ0FBQyxVQUFSLEdBQXFCLFNBQUEsR0FBQTtTQUNwQixLQUFBLENBQU0sdUJBQU4sRUFEb0I7QUFBQSxDQUZyQixDQUFBOztBQUFBLE9BS08sQ0FBQyxPQUFSLEdBQWtCLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLENBTGxCLENBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiY2xhc3MgZXhwb3J0cy5MYXllclNWRyBleHRlbmRzIExheWVyIFxuXHRjb25zdHJ1Y3RvcjogKG9wdGlvbnM9e30pIC0+XG5cdFx0XG5cdFx0c3VwZXIgb3B0aW9uc1xuXG5cdFx0QGh0bWwgPSBcIjxzdmcgaWQ9JyN7b3B0aW9ucy5pZH0nIHdpZHRoPScje0Aud2lkdGh9JyBoZWlnaHQ9JyN7QC5oZWlnaHR9Jz48ZGVmcz48L2RlZnM+PC9zdmc+XCJcblx0XHRAc3ZnID0gQC5xdWVyeVNlbGVjdG9yKFwiIyN7b3B0aW9ucy5pZH1cIilcdFxuXG5cdFx0QHNoYXBlcyA9IHt9XG5cdFx0QG1hc2tzID0ge31cblx0XHRAY2xpcFBhdGhzID0ge31cblxuXHRhZGRTaGFwZTogKG9wdGlvbnM9e30pIC0+XG5cdFx0c2hhcGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcIiN7b3B0aW9ucy5zaGFwZX1cIikgXG5cblx0XHRmb3Igb3duIG9wdGlvbiwgdmFsdWUgb2Ygb3B0aW9uc1xuXHRcdFx0XHRpZiBvcHRpb24gaXNudCBcInNoYXBlXCJcblx0XHRcdFx0XHRzaGFwZS5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcIiN7b3B0aW9ufVwiLCBcIiN7b3B0aW9uc1tvcHRpb25dfVwiKVxuXG5cdFx0QHN2Zy5hcHBlbmRDaGlsZChzaGFwZSlcblx0XHRAc2hhcGVzW1wiI3tvcHRpb25zLmlkfVwiXSA9IHNoYXBlXG5cblx0XHRyZXR1cm4gc2hhcGVcblxuXHRhZGREZWY6IChvcHRpb25zPXt9KSAtPlxuXHRcdGRlZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwiI3tvcHRpb25zLnR5cGV9XCIpXG5cdFx0ZGVmLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiaWRcIiwgXCIje29wdGlvbnMuaWR9XCIpXG5cblx0XHRpZiBkZWYgaXMgXCJjbGlwUGF0aFwiIG9yIFwibWFza1wiXG5cdFx0XHRmb3Igc2hhcGUgaW4gb3B0aW9ucy5zaGFwZXNcblx0XHRcdFx0aWYgdHlwZW9mKHNoYXBlKSBpcyBcInN0cmluZ1wiXG5cdFx0XHRcdFx0c2hhcGUgPSBALnN2Zy5nZXRFbGVtZW50QnlJZChcIiN7c2hhcGV9XCIpXG5cdFx0XHRcdGRlZi5hcHBlbmRDaGlsZChzaGFwZSlcblxuXHRcdGRlZnMgPSBALnN2Zy5nZXRFbGVtZW50c0J5VGFnTmFtZShcImRlZnNcIilbMF1cblx0XHRkZWZzLmFwcGVuZENoaWxkKGRlZilcblxuXHRcdGlmIG9wdGlvbnMudHlwZSBpcyBcImNsaXBQYXRoXCIgdGhlbiBAY2xpcFBhdGhzW1wiI3tvcHRpb25zLmlkfVwiXSA9IGRlZiBlbHNlIEBtYXNrc1tcIiN7b3B0aW9ucy5pZH1cIl0gPSBkZWZcblxuXHRhZGRUb01hc2s6IChzaGFwZXMsIG1hc2ssIHByZXZTaGFwZSkgLT5cblx0XHRpZiB0eXBlb2YobWFzaykgaXMgXCJzdHJpbmdcIlxuXHRcdFx0bWFzayA9IEAuc3ZnLmdldEVsZW1lbnRCeUlkKFwiI3ttYXNrfVwiKVxuXG5cdFx0aWYgIUFycmF5LmlzQXJyYXkoc2hhcGVzKVxuXHRcdFx0c2hhcGUgPSBzaGFwZXNcblx0XHRcdGlmIHR5cGVvZihzaGFwZSkgaXMgXCJzdHJpbmdcIlxuXHRcdFx0XHRzaGFwZSA9IEAuc3ZnLmdldEVsZW1lbnRCeUlkKFwiI3tzaGFwZX1cIilcblxuXHRcdFx0aWYgIXByZXZTaGFwZVxuXHRcdFx0XHRtYXNrLmFwcGVuZENoaWxkKHNoYXBlKVxuXHRcdFx0ZWxzZVxuXHRcdFx0XHRtYXNrLmluc2VydEJlZm9yZShzaGFwZSwgcHJldlNoYXBlKVxuXG5cdFx0ZWxzZVxuXHRcdFx0Zm9yIHNoYXBlIGluIHNoYXBlc1xuXHRcdFx0XHRpZiB0eXBlb2Yoc2hhcGUpIGlzIFwic3RyaW5nXCJcblx0XHRcdFx0XHRzaGFwZSA9IEAuc3ZnLmdldEVsZW1lbnRCeUlkKFwiI3tzaGFwZX1cIilcblxuXHRcdFx0XHRpZiAhcHJldlNoYXBlXG5cdFx0XHRcdFx0bWFzay5hcHBlbmRDaGlsZChzaGFwZSlcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdG1hc2suaW5zZXJ0QmVmb3JlKHNoYXBlLCBwcmV2U2hhcGUpXG5cblx0bWFzazogKHNoYXBlLCBtYXNrKSAtPlxuXHRcdGlmIHR5cGVvZihzaGFwZSkgaXMgXCJzdHJpbmdcIlxuXHRcdFx0c2hhcGUgPSBALnN2Zy5nZXRFbGVtZW50QnlJZChcIiN7c2hhcGV9XCIpXG5cblx0XHRpZiB0eXBlb2YobWFzaykgaXNudCBcInN0cmluZ1wiXG5cdFx0XHRtYXNrID0gbWFzay5nZXRBdHRyaWJ1dGVOUyhudWxsLCBcImlkXCIpXG5cblx0XHRzaGFwZS5zZXRBdHRyaWJ1dGVOUyhudWxsLCBcIm1hc2tcIiwgXCJ1cmwoIyN7bWFza30pXCIpIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjkuMVxudmFyIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5leHBvcnRzLkxheWVyU1ZHID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKExheWVyU1ZHLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBMYXllclNWRyhvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cbiAgICBMYXllclNWRy5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgICB0aGlzLmh0bWwgPSBcIjxzdmcgaWQ9J1wiICsgb3B0aW9ucy5pZCArIFwiJyB3aWR0aD0nXCIgKyB0aGlzLndpZHRoICsgXCInIGhlaWdodD0nXCIgKyB0aGlzLmhlaWdodCArIFwiJz48ZGVmcz48L2RlZnM+PC9zdmc+XCI7XG4gICAgdGhpcy5zdmcgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBvcHRpb25zLmlkKTtcbiAgICB0aGlzLnNoYXBlcyA9IHt9O1xuICAgIHRoaXMubWFza3MgPSB7fTtcbiAgICB0aGlzLmNsaXBQYXRocyA9IHt9O1xuICB9XG5cbiAgTGF5ZXJTVkcucHJvdG90eXBlLmFkZFNoYXBlID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHZhciBvcHRpb24sIHNoYXBlLCB2YWx1ZTtcbiAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIHNoYXBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJcIiArIG9wdGlvbnMuc2hhcGUpO1xuICAgIGZvciAob3B0aW9uIGluIG9wdGlvbnMpIHtcbiAgICAgIGlmICghaGFzUHJvcC5jYWxsKG9wdGlvbnMsIG9wdGlvbikpIGNvbnRpbnVlO1xuICAgICAgdmFsdWUgPSBvcHRpb25zW29wdGlvbl07XG4gICAgICBpZiAob3B0aW9uICE9PSBcInNoYXBlXCIpIHtcbiAgICAgICAgc2hhcGUuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJcIiArIG9wdGlvbiwgXCJcIiArIG9wdGlvbnNbb3B0aW9uXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuc3ZnLmFwcGVuZENoaWxkKHNoYXBlKTtcbiAgICB0aGlzLnNoYXBlc1tcIlwiICsgb3B0aW9ucy5pZF0gPSBzaGFwZTtcbiAgICByZXR1cm4gc2hhcGU7XG4gIH07XG5cbiAgTGF5ZXJTVkcucHJvdG90eXBlLmFkZERlZiA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICB2YXIgZGVmLCBkZWZzLCBpLCBsZW4sIHJlZiwgc2hhcGU7XG4gICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cbiAgICBkZWYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcIlwiICsgb3B0aW9ucy50eXBlKTtcbiAgICBkZWYuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJpZFwiLCBcIlwiICsgb3B0aW9ucy5pZCk7XG4gICAgaWYgKGRlZiA9PT0gXCJjbGlwUGF0aFwiIHx8IFwibWFza1wiKSB7XG4gICAgICByZWYgPSBvcHRpb25zLnNoYXBlcztcbiAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBzaGFwZSA9IHJlZltpXTtcbiAgICAgICAgaWYgKHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHNoYXBlID0gdGhpcy5zdmcuZ2V0RWxlbWVudEJ5SWQoXCJcIiArIHNoYXBlKTtcbiAgICAgICAgfVxuICAgICAgICBkZWYuYXBwZW5kQ2hpbGQoc2hhcGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBkZWZzID0gdGhpcy5zdmcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkZWZzXCIpWzBdO1xuICAgIGRlZnMuYXBwZW5kQ2hpbGQoZGVmKTtcbiAgICBpZiAob3B0aW9ucy50eXBlID09PSBcImNsaXBQYXRoXCIpIHtcbiAgICAgIHJldHVybiB0aGlzLmNsaXBQYXRoc1tcIlwiICsgb3B0aW9ucy5pZF0gPSBkZWY7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLm1hc2tzW1wiXCIgKyBvcHRpb25zLmlkXSA9IGRlZjtcbiAgICB9XG4gIH07XG5cbiAgTGF5ZXJTVkcucHJvdG90eXBlLmFkZFRvTWFzayA9IGZ1bmN0aW9uKHNoYXBlcywgbWFzaywgcHJldlNoYXBlKSB7XG4gICAgdmFyIGksIGxlbiwgcmVzdWx0cywgc2hhcGU7XG4gICAgaWYgKHR5cGVvZiBtYXNrID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBtYXNrID0gdGhpcy5zdmcuZ2V0RWxlbWVudEJ5SWQoXCJcIiArIG1hc2spO1xuICAgIH1cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2hhcGVzKSkge1xuICAgICAgc2hhcGUgPSBzaGFwZXM7XG4gICAgICBpZiAodHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHNoYXBlID0gdGhpcy5zdmcuZ2V0RWxlbWVudEJ5SWQoXCJcIiArIHNoYXBlKTtcbiAgICAgIH1cbiAgICAgIGlmICghcHJldlNoYXBlKSB7XG4gICAgICAgIHJldHVybiBtYXNrLmFwcGVuZENoaWxkKHNoYXBlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBtYXNrLmluc2VydEJlZm9yZShzaGFwZSwgcHJldlNoYXBlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gc2hhcGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHNoYXBlID0gc2hhcGVzW2ldO1xuICAgICAgICBpZiAodHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgc2hhcGUgPSB0aGlzLnN2Zy5nZXRFbGVtZW50QnlJZChcIlwiICsgc2hhcGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcHJldlNoYXBlKSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKG1hc2suYXBwZW5kQ2hpbGQoc2hhcGUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2gobWFzay5pbnNlcnRCZWZvcmUoc2hhcGUsIHByZXZTaGFwZSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gIH07XG5cbiAgTGF5ZXJTVkcucHJvdG90eXBlLm1hc2sgPSBmdW5jdGlvbihzaGFwZSwgbWFzaykge1xuICAgIGlmICh0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHNoYXBlID0gdGhpcy5zdmcuZ2V0RWxlbWVudEJ5SWQoXCJcIiArIHNoYXBlKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBtYXNrICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICBtYXNrID0gbWFzay5nZXRBdHRyaWJ1dGVOUyhudWxsLCBcImlkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2hhcGUuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJtYXNrXCIsIFwidXJsKCNcIiArIG1hc2sgKyBcIilcIik7XG4gIH07XG5cbiAgcmV0dXJuIExheWVyU1ZHO1xuXG59KShMYXllcik7XG4iLCIjIEFkZCB0aGUgZm9sbG93aW5nIGxpbmUgdG8geW91ciBwcm9qZWN0IGluIEZyYW1lciBTdHVkaW8uIFxuIyBteU1vZHVsZSA9IHJlcXVpcmUgXCJteU1vZHVsZVwiXG4jIFJlZmVyZW5jZSB0aGUgY29udGVudHMgYnkgbmFtZSwgbGlrZSBteU1vZHVsZS5teUZ1bmN0aW9uKCkgb3IgbXlNb2R1bGUubXlWYXJcblxuZXhwb3J0cy5teVZhciA9IFwibXlWYXJpYWJsZVwiXG5cbmV4cG9ydHMubXlGdW5jdGlvbiA9IC0+XG5cdHByaW50IFwibXlGdW5jdGlvbiBpcyBydW5uaW5nXCJcblxuZXhwb3J0cy5teUFycmF5ID0gWzEsIDIsIDNdIl19
